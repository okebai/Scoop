var Scoop;(function(n){var t=function(){function n(){}return n.prototype.addConnection=function(n){var t=new FormData;return t.append("connection.name",n.name()),t.append("connection.uri",n.uri()),t.append("connection.autoConnect",n.autoConnect()),t.append("__RequestVerificationToken",$("input[name=__RequestVerificationToken]").val()),$.ajax({url:"/Connection/Add",method:"POST",cache:!1,contentType:!1,processData:!1,data:t})},n.prototype.getConnections=function(){return $.ajax({url:"/Connection/List",method:"GET"})},n.prototype.getAvailableTasks=function(n){return $.ajax({url:n.uri()+"/AvailableTasks",method:"GET",cache:!1})},n.prototype.connect=function(n){var t,i,r;return this.disconnect(n),console.log("connect",n.guid()),t=$.hubConnection(n.uri()),i=$.Deferred(),$.each(n.chosenTasks(),function(r,u){var f=null;u.hubName!=null&&(f=t.createHubProxy(u.hubName),i.done(function(){u.onConnect(f)}));u.init(f,n)}),t.logging=!1,r=t.start(),r.done(function(){n.currentHubConnection=t;i.resolve()}),r},n.prototype.disconnect=function(n){$.each(n.chosenTasks(),function(t,i){i.onDisconnect(n)});n.currentHubConnection&&n.currentHubConnection.stop();n.currentHubConnection=null},n}();n.ConnectionService=t})(Scoop||(Scoop={}));